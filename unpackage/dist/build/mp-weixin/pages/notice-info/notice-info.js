(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/notice-info/notice-info"],{5588:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("2f62");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c={components:{},data:function(){return{totalH:0,isNewAdd:!0,noticeInfo:"",titleText:"",contentText:"",sortvalueText:"",id:""}},onLoad:function(e){var n=this;t.getSystemInfo({success:function(e){n.totalH=e.windowHeight-t.upx2px(62)}}),console.log(e.id),""==e.id?this.isNewAdd=!0:(this.isNewAdd=!1,this.id=e.id,this.__init())},computed:a({},(0,o.mapState)({noticeList:function(t){return t.notice.noticeList}}),{},(0,o.mapGetters)([]),{getTitle:function(){return this.isNewAdd?"新增公告":"修改公告"}}),methods:a({},(0,o.mapMutations)(["updataSortByValue"]),{},(0,o.mapActions)([]),{__init:function(){var e=this;e.$H.post("/api/Notice/Detail",{ID:this.id},{token:!0}).then((function(n){console.log(n),0==n.status?(e.titleText=n.data.Name,e.contentText=n.data.Contents,e.sortvalueText=n.data.SortValue,e.noticeInfo=n.data):t.showToast({title:n.message,icon:"none",duration:1e3})}))},titleInput:function(t){this.titleText=t.detail.value},contentInput:function(t){this.contentText=t.detail.value},sortValueInput:function(e){var n=e.target.value,o=new RegExp("^(([0-9]+.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*.[0-9]+)|([0-9]*[1-9][0-9]*))$");if(!o.test(n)&&""!=n)return t.showToast({title:"请输入数字",icon:"none",duration:1e3}),void(this.sortvalueText="");this.sortvalueText=e.detail.value},newAddNotice:function(){var e=this;""!=e.titleText&&""!=e.contentText&&""!=this.sortvalueText?e.$H.post("/api/Notice/Add",{Name:e.titleText,Contents:e.contentText,SortValue:e.sortvalueText},{token:!0}).then((function(n){console.log(n),0==n.status?(e.noticeList.unshift(n.data),e.updataSortByValue(),t.navigateBack({delta:1})):t.showToast({title:n.message,icon:"none",duration:1e3})})):t.showToast({title:"请填写完整信息",icon:"none",duration:1e3})},changeNotice:function(){var e=this;e.titleText!=e.noticeInfo.Name||e.contentText!=e.noticeInfo.Contents||e.sortvalueText!=e.noticeInfo.SortValue?e.$H.post("/api/Notice/Update",{ID:e.id,Name:e.titleText,Contents:e.contentText,SortValue:e.sortvalueText},{token:!0}).then((function(n){if(console.log(n),0==n.status){for(var o=e.noticeList,i=0;i<o.length;i++)if(o[i].ID==e.id)return e.noticeList.splice(i,1,n.data),e.updataSortByValue(),void t.navigateBack({delta:1})}else t.showToast({title:n.message,icon:"none",duration:1e3})})):t.showToast({title:"没有修改任何信息",icon:"none",duration:1e3})}})};e.default=c}).call(this,n("543d")["default"])},"5c84":function(t,e,n){"use strict";n.r(e);var o=n("66c4"),i=n("8fe7");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);var r,c=n("f0c5"),u=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);e["default"]=u.exports},"66c4":function(t,e,n){"use strict";var o,i=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}))},"8fe7":function(t,e,n){"use strict";n.r(e);var o=n("5588"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},df5f:function(t,e,n){"use strict";(function(t){n("2e69"),n("921b");o(n("66fd"));var e=o(n("5c84"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])}},[["df5f","common/runtime","common/vendor"]]]);