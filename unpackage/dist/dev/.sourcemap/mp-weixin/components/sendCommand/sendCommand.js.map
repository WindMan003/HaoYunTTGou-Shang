{"version":3,"sources":["webpack:///D:/Uniapp-Project/商家后台1.0.0/components/sendCommand/sendCommand.vue?933c","webpack:///D:/Uniapp-Project/商家后台1.0.0/components/sendCommand/sendCommand.vue?e83b","webpack:///D:/Uniapp-Project/商家后台1.0.0/components/sendCommand/sendCommand.vue?2d2a","webpack:///D:/Uniapp-Project/商家后台1.0.0/components/sendCommand/sendCommand.vue?d63a","uni-app:///components/sendCommand/sendCommand.vue","webpack:///D:/Uniapp-Project/商家后台1.0.0/components/sendCommand/sendCommand.vue?d3cd","webpack:///D:/Uniapp-Project/商家后台1.0.0/components/sendCommand/sendCommand.vue?00b6"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwH;AACxH;AAC+D;AACL;AACc;;;AAGxE;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,sFAAM;AACR,EAAE,+FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAwmB,CAAgB,qnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACU5nB,gD;;;;;;AAHA,4EACA,4EACA,oF,eAKA,EACA,IADA,kBACA,CACA;AACA,qBADA;AAEA,iBAFA;AAGA,oBAHA;AAIA,iBAJA;AAKA,qBALA;AAMA,sBANA;AAOA,sBAPA;AAQA,uBARA;AASA,6DATA;AAUA,kBAVA;AAWA,kBAXA;AAYA,kBAZA;AAaA,sBAbA;AAcA,mBAdA;AAeA,qBAfA;AAgBA,0BAhBA;AAiBA,wBAjBA;;AAmBA,GArBA;AAsBA;AACA;AACA,2FADA;AAEA,gFAFA,GADA,CAtBA;;;AA4BA,QA5BA,oBA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GA/CA;AAgDA,SAhDA,qBAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GA/DA;AAgEA,QAhEA,oBAgEA;AACA;AACA;AACA;AACA;AACA,wBADA;AAEA,aAFA,mBAEA,GAFA,EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OATA;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAtFA;AAuFA,UAvFA,sBAuFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GA/FA;AAgGA;AACA;AACA,cAFA,sBAEA,CAFA,EAEA;AACA;AACA,KAJA;AAKA;AACA,YANA,sBAMA;AACA;AACA;AACA;AACA,eADA,EACA;AACA,6CADA,EADA;AAGA,YAHA,CAGA,IAHA;;AAKA;AACA,KAfA;AAgBA;AACA,aAjBA,uBAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCADA;AAEA,YAFA;AAGA,YAHA;AAIA,0BAJA;AAKA,4BALA;AAMA;AACA;AACA,SARA;AASA;AACA;AACA;AACA;AACA,SAbA;;AAeA,KAhDA;;AAkDA;AACA,gBAnDA,wBAmDA,MAnDA,EAmDA,MAnDA,EAmDA,QAnDA,EAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBATA,CASA;AACA,8BAVA,CAUA;AACA,wCAXA,CAWA;AACA;AACA;AACA;AACA;;AAEA,sBAjBA,CAiBA;AACA,8BAlBA,CAkBA;AACA,wCAnBA,CAmBA;AACA;AACA;AACA;AACA;;AAEA,sBAzBA,CAyBA;AACA,6BA1BA,CA0BA;AACA;AACA,wCA5BA,CA4BA;AACA;AACA;AACA;AACA,wCAhCA,CAgCA;AACA;AACA;AACA;;AAEA,wCArCA,CAqCA;AACA;AACA;;AAEA;AACA;AACA,2BA3CA,CA2CA;AACA,sBA5CA,CA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BADA,CACA;AACA,4CAFA,CAEA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;;AAEA,0CAZA,CAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wCAnFA,CAmFA;AACA;AACA;;AAEA;AACA,2BAxFA,CAwFA;AACA,sBAzFA,CAyFA;AACA;AACA;AACA;;AAEA;AACA,2BA/FA,CA+FA;AACA,sBAhGA,CAgGA;AACA,wCAjGA,CAiGA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;;AAEA,wCAzGA,CAyGA;AACA;AACA;;AAEA,2BA7GA,CA6GA;AACA,sBA9GA,CA8GA;AACA;AACA;AACA;;AAEA,wCAnHA,CAmHA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KA9KA;;AAgLA;AACA,eAjLA,uBAiLA,IAjLA,EAiLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA5LA;AA6LA;AACA,eA9LA,yBA8LA;AACA;AACA;AACA,KAjMA;AAkMA;AACA,QAnMA,gBAmMA,IAnMA,EAmMA;AACA,sBADA;AAEA,iBAFA,GAEA,IAFA,CAEA,WAFA,CAEA,QAFA,GAEA,IAFA,CAEA,QAFA,CAEA,QAFA,GAEA,IAFA,CAEA,QAFA,CAEA,UAFA,GAEA,IAFA,CAEA,WAFA,CAEA,QAFA,GAEA,IAFA,CAEA,UAFA,CAEA,YAFA,GAEA,IAFA,CAEA,YAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OANA,MAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8CADA;AAEA,qDAFA;AAGA,6DAHA;AAIA,kBAJA;AAKA;AACA;AACA,SAPA;AAQA;AACA;AACA,SAVA;AAWA;AACA;AACA;AACA;AACA;AACA,WAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAPA,MAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAjCA;;AAmCA,KA1PA,EAhGA,E;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAmnC,CAAgB,qkCAAG,EAAC,C;;;;;;;;;;;ACAvoC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/sendCommand/sendCommand.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./sendCommand.vue?vue&type=template&id=4cdc0fde&\"\nvar renderjs\nimport script from \"./sendCommand.vue?vue&type=script&lang=js&\"\nexport * from \"./sendCommand.vue?vue&type=script&lang=js&\"\nimport style0 from \"./sendCommand.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Uniapp-Project/商家后台1.0.0/components/sendCommand/sendCommand.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sendCommand.vue?vue&type=template&id=4cdc0fde&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sendCommand.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sendCommand.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\">\r\n\t\t\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tvar tsc = require(\"../../common/bluetooth/ble/tsc.js\");\r\n\tvar esc = require(\"../../common/bluetooth/ble/esc.js\");\r\n\tvar encode = require(\"../../common/bluetooth/ble/encoding.js\");\r\n\timport {\r\n\t\tmapState\r\n\t} from 'vuex';\r\n\t\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tsendContent: \"\",\r\n\t\t\t\tlooptime: 0,\r\n\t\t\t\tcurrentTime: 1,\r\n\t\t\t\tlastData: 0,\r\n\t\t\t\toneTimeData: 30,\r\n\t\t\t\treturnResult: \"\",\r\n\t\t\t\tcanvasWidth: 180,\r\n\t\t\t\tcanvasHeight: 180,\r\n\t\t\t\timageSrc: '../../static/img/abc_ic_star_black_16dp.png',\r\n\t\t\t\tbuffSize: [],\r\n\t\t\t\tbuffIndex: 0,\r\n\t\t\t\tprintNum: [],\r\n\t\t\t\tprintNumIndex: 0,\r\n\t\t\t\tprinterNum: 1,\r\n\t\t\t\tcurrentPrint: 1,\r\n\t\t\t\tisReceiptSend: false,\r\n\t\t\t\tisLabelSend: false\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t...mapState({\r\n\t\t\t\tBLEInformation:state=>state.bluetooth.BLEInformation,\r\n\t\t\t\tmerchantInfo:state=>state.user.merchantInfo\r\n\t\t\t})\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tlet that = this;\r\n\t\t\t// uni.notifyBLECharacteristicValueChange({\r\n\t\t\t//   deviceId: BLEInformation.deviceId,\r\n\t\t\t//   serviceId: BLEInformation.notifyServiceId,\r\n\t\t\t//   characteristicId: BLEInformation.notifyCharaterId,\r\n\t\t\t//   state: true,\r\n\t\t\t//   success(res) {\r\n\t\t\t// \tuni.onBLECharacteristicValueChange(function(r) {\r\n\t\t\t// \t  console.log(`characteristic ${r.characteristicId} has changed, now is ${r}`)\r\n\t\t\t// \t})\r\n\t\t\t//   },\r\n\t\t\t//   fail: function(e) {\r\n\t\t\t// \tconsole.log(e)\r\n\t\t\t//   },\r\n\t\t\t//   complete: function(e) {\r\n\t\t\t// \tconsole.log(e)\r\n\t\t\t//   }\r\n\t\t\t// })\r\n\t\t},\r\n\t\tonReady(){\r\n\t\t\tlet list = []\r\n\t\t\tlet numList = []\r\n\t\t\tlet j = 0\r\n\t\t\tfor (let i = 20; i < 200; i += 10) {\r\n\t\t\t  list[j] = i;\r\n\t\t\t  j++\r\n\t\t\t}\r\n\t\t\tfor (let i = 1; i < 10; i++) {\r\n\t\t\t  numList[i - 1] = i\r\n\t\t\t}\r\n\t\t\tthis.buffSize = list;\r\n\t\t\tthis.oneTimeData = list[0];\r\n\t\t\tthis.printNum = numList;\r\n\t\t\tthis.printerNum = numList[0];\r\n\t\t},\r\n\t\tonShow(){\r\n\t\t\tlet that = this;\r\n\t\t\tlet width;\r\n\t\t\tlet height;\r\n\t\t\tuni.getImageInfo({\r\n\t\t\t  src: that.imageSrc,\r\n\t\t\t  success(res) {\r\n\t\t\t\tconsole.log(res.width)\r\n\t\t\t\tconsole.log(res.height)\r\n\t\t\t\twidth = res.width\r\n\t\t\t\theight = res.height\r\n\t\t\t\tthat.canvasWidth = res.width;\r\n\t\t\t\tthat.canvasHeight = res.height;\r\n\t\t\t  }\r\n\t\t\t})\r\n\t\t\tconst ctx = uni.createCanvasContext(\"edit_area_canvas\", this);\r\n\t\t\t// if (app.globalData.platform == \"android\") {\r\n\t\t\t//   ctx.translate(width, height)\r\n\t\t\t//   ctx.rotate(180 * Math.PI / 180)\r\n\t\t\t// }\r\n\t\t\tctx.drawImage(this.imageSrc, 0, 0, width, height);\r\n\t\t\tctx.draw();\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tlet that = this;\r\n\t\t\t// uni.closeBLEConnection({\r\n\t\t //      deviceId: BLEInformation.deviceId,\r\n\t\t //      success: function(res) {\r\n\t\t //        console.log(\"关闭蓝牙成功\")\r\n\t\t //      },\r\n\t\t //    })\t\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t//获取输入内容\r\n\t\t\tinputEvent(e){\r\n\t\t\t\tthis.sendContent = e.detail.value;\r\n\t\t\t},\r\n\t\t\t//输入框点击发送\r\n\t\t\tsendData(){\r\n\t\t\t\tlet data = this.sendContent + \"\\n\"\r\n\t\t\t\tthis.looptime = 0;\r\n\t\t\t\tvar content = new encode.TextEncoder(\r\n\t\t\t\t  'gb18030', {\r\n\t\t\t\t\tNONSTANDARD_allowLegacyEncoding: true\r\n\t\t\t\t  }).encode(data);\r\n\t\t\t\r\n\t\t\t\tthis.prepareSend(content);\r\n\t\t\t},\r\n\t\t\t//标签测试\r\n\t\t\tlabelTest(){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet canvasWidth = that.canvasWidth\r\n\t\t\t\tlet canvasHeight = that.canvasHeight\r\n\t\t\t\tlet command = tsc.jpPrinter.createNew()\r\n\t\t\t\tcommand.setSize(48, 40)\r\n\t\t\t\tcommand.setGap(0)\r\n\t\t\t\tcommand.setCls()\r\n\t\t\t\tcommand.setText(0, 30, \"TSS24.BF2\", 1, 1, \"图片\")\r\n\t\t\t\tcommand.setQR(40, 120, \"L\", 5, \"A\", \"www.smarnet.cc佳博智汇\")\r\n\t\t\t\tcommand.setText(60, 90, \"TSS24.BF2\", 1, 1, \"佳博智汇\")\r\n\t\t\t\tcommand.setText(170, 50, \"TSS24.BF2\", 1, 1, \"小程序测试\")\r\n\t\t\t\tcommand.setText(170, 90, \"TSS24.BF2\", 1, 1, \"测试数字12345678\")\r\n\t\t\t\tcommand.setText(170, 120, \"TSS24.BF2\", 1, 1, \"测试英文abcdefg\")\r\n\t\t\t\tcommand.setText(170, 150, \"TSS24.BF2\", 1, 1, \"测试符号/*-+!@#$\")\r\n\t\t\t\tcommand.setBarCode(170, 180, \"EAN8\", 64, 1, 3, 3, \"1234567\")\r\n\t\t\t\tuni.canvasGetImageData({\r\n\t\t\t\t  canvasId: 'edit_area_canvas',\r\n\t\t\t\t  x: 0,\r\n\t\t\t\t  y: 0,\r\n\t\t\t\t  width: canvasWidth,\r\n\t\t\t\t  height: canvasHeight,\r\n\t\t\t\t  success: function(res) {\r\n\t\t\t\t\tcommand.setBitmap(60, 0, 1, res)\r\n\t\t\t\t  },\r\n\t\t\t\t  complete: function() {\r\n\t\t\t\t\tcommand.setPagePrint()\r\n\t\t\t\t\tthat.isLabelSend = true;\r\n\t\t\t\t\tthat.prepareSend(command.getData())\r\n\t\t\t\t  }\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t//票据打印\r\n\t\t\treceiptOrder(m_item, m_list, m_status){\r\n\t\t\t\tconsole.log(m_item)\r\n\t\t\t\tconsole.log(m_list)\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tvar canvasWidth = that.canvasWidth\r\n\t\t\t\tvar canvasHeight = that.canvasHeight\r\n\t\t\t\tvar command = esc.jpPrinter.createNew()\r\n\t\t\t\tcommand.init()\r\n\t\t\t\t// 标题\r\n\t\t\t\tcommand.bold(1);//加粗\r\n\t\t\t\tcommand.setFontSize(16);//字体大小\r\n\t\t\t\tcommand.setSelectJustification(1)//居中\r\n\t\t\t\tcommand.rowSpace(100);\r\n\t\t\t\tcommand.setText(that.merchantInfo.Name);\r\n\t\t\t\tcommand.setPrint();\r\n\t\t\t\tcommand.rowSpace(60);\r\n\t\t\t\t\r\n\t\t\t\tcommand.bold(1);//加粗\r\n\t\t\t\tcommand.setFontSize(16);//字体大小\r\n\t\t\t\tcommand.setSelectJustification(1)//居中\r\n\t\t\t\tcommand.rowSpace(100);\r\n\t\t\t\tcommand.setText('<- '+m_status+' ->');\r\n\t\t\t\tcommand.setPrint();\r\n\t\t\t\tcommand.rowSpace(60);\r\n\t\t\t\t\r\n\t\t\t\tcommand.bold(0);//取消加粗\r\n\t\t\t\tcommand.setFontSize(0);//正常字体\r\n\t\t\t\t//时间\r\n\t\t\t\tcommand.setSelectJustification(0);//居左\r\n\t\t\t\tcommand.setText(m_item.CreateTime);\r\n\t\t\t\tcommand.setPrint();\r\n\t\t\t\t//编号\r\n\t\t\t\tcommand.setSelectJustification(0);//居左\r\n\t\t\t\tcommand.setText('订单号：'+m_item.ID);\r\n\t\t\t\t// command.setPrintAndFeed(80);//打印并走纸feed个单位\r\n\t\t\t\tcommand.setPrint();\r\n\t\t\t\t\r\n\t\t\t\tcommand.setSelectJustification(1);//居中\r\n\t\t\t\tcommand.setText('--------------------------------')\r\n\t\t\t\tcommand.setPrint();\r\n\t\t\t\t\r\n\t\t\t\t//列表\r\n\t\t\t\tcommand.setSelectJustification(0);\r\n\t\t\t\tcommand.rowSpace(80);//间距\r\n\t\t\t\tcommand.bold(5);//加粗\r\n\t\t\t\tcommand.setText(\"名称\");\r\n\t\t\t\tcommand.setAbsolutePrintPosition(140);\r\n\t\t\t\tcommand.setText(\"单价\");\r\n\t\t\t\tcommand.setAbsolutePrintPosition(220);\r\n\t\t\t\tcommand.setText(\"数量\");\r\n\t\t\t\tcommand.setAbsolutePrintPosition(300);\r\n\t\t\t\tcommand.setText(\"价格\");\r\n\t\t\t\tcommand.setPrint()\r\n\t\t\t\t\r\n\t\t\t\tcommand.bold(0);\r\n\t\t\t\tlet total = 0\r\n\t\t\t\tfor (var i = 0; i < m_list.length; i++) {\r\n\t\t\t\t\tif(m_list.length > 1){\r\n\t\t\t\t\t\tcommand.rowSpace(80);//间距\r\n\t\t\t\t\t\tcommand.setSelectJustification(1);//居中\r\n\t\t\t\t\t\tif(m_list[i].addRound == 0){\r\n\t\t\t\t\t\t\tcommand.setText('首轮点购');\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tcommand.setText('第'+(m_list[i].addRound+1)+'轮加菜');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcommand.setPrint();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcommand.setSelectJustification(0);//居中\r\n\t\t\t\t\tfor (var j = 0; j < m_list[i].list.length; j++) {\r\n\t\t\t\t\t\tlet temp = m_list[i].list[j]\r\n\t\t\t\t\t\ttotal = total + temp.TotalAmount\r\n\t\t\t\t\t\tcommand.setText(temp.ProductName);\r\n\t\t\t\t\t\tcommand.setAbsolutePrintPosition(140);\r\n\t\t\t\t\t\tcommand.setText(temp.Price);\r\n\t\t\t\t\t\tcommand.setAbsolutePrintPosition(220);\r\n\t\t\t\t\t\tcommand.setText(temp.Count);\r\n\t\t\t\t\t\tcommand.setAbsolutePrintPosition(300);\r\n\t\t\t\t\t\tcommand.setText('￥'+temp.TotalAmount);\r\n\t\t\t\t\t\tcommand.setPrint()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcommand.setSelectJustification(1);//居中\t\t\t\t\r\n\t\t\t\tcommand.setText('--------------------------------')\r\n\t\t\t\tcommand.setPrint();\r\n\t\t\t\t\r\n\t\t\t\t//总价\r\n\t\t\t\tcommand.rowSpace(80);//间距\r\n\t\t\t\tcommand.bold(2);//加粗\r\n\t\t\t\tcommand.setSelectJustification(2);\r\n\t\t\t\tcommand.setText('总价：￥'+total)\r\n\t\t\t\tcommand.setPrint();\r\n\t\t\t\t\r\n\t\t\t\t//提示\r\n\t\t\t\tcommand.rowSpace(80);//间距\r\n\t\t\t\tcommand.bold(2);//加粗\r\n\t\t\t\tcommand.setSelectJustification(0);//居中\r\n\t\t\t\tif(m_item.UserNote != ''){\r\n\t\t\t\t\tcommand.setText(\"备注：\"+m_item.UserNote);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcommand.setText(\"备注：无\");\r\n\t\t\t\t}\r\n\t\t\t\tcommand.setPrint();\r\n\t\t\t\t\r\n\t\t\t\tcommand.setSelectJustification(1);//居中\r\n\t\t\t\tcommand.setText('--------------------------------')\r\n\t\t\t\tcommand.setPrint();\r\n\t\t\t\t\r\n\t\t\t\tcommand.rowSpace(80);//间距\r\n\t\t\t\tcommand.bold(2);//加粗\r\n\t\t\t\tcommand.setSelectJustification(0);\r\n\t\t\t\tcommand.setText(\"应付金额：￥\"+total);\r\n\t\t\t\tcommand.setPrint();\r\n\t\t\t\t\r\n\t\t\t\tcommand.setSelectJustification(1);//居中\r\n\t\t\t\tcommand.setText('--------------------------------')\r\n\t\t\t\tcommand.setPrint();\r\n\t\t\t\t\r\n\t\t\t\tcommand.setPrintAndFeedRow(3);\r\n\t\t\t\t\r\n\t\t\t\tthat.isReceiptSend = true;\r\n\t\t\t\tthat.prepareSend(command.getData());\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//准备发送，根据每次发送字节数来处理分包数量\r\n\t\t\tprepareSend(buff){\r\n\t\t\t\tconsole.log(buff);\r\n\t\t\t\tlet that = this\r\n\t\t\t\tlet time = that.oneTimeData\r\n\t\t\t\tlet looptime = parseInt(buff.length / time);\r\n\t\t\t\tlet lastData = parseInt(buff.length % time);\r\n\t\t\t\tconsole.log(looptime + \"---\" + lastData)\r\n\t\t\t\tthis.looptime = looptime + 1;\r\n\t\t\t\tthis.lastData = lastData;\r\n\t\t\t\tthis.currentTime = 1;\r\n\t\t\t\tthat.Send(buff)\r\n\t\t\t},\r\n\t\t\t//查询打印机状态\r\n\t\t\tqueryStatus(){\r\n\t\t\t\tlet command = esc.jpPrinter.Query();\r\n\t\t\t\tcommand.getRealtimeStatusTransmission(1);\r\n\t\t\t},\r\n\t\t\t//分包发送\r\n\t\t\tSend(buff){\r\n\t\t\t\tlet that = this\r\n\t\t\t\tlet {currentTime,looptime:loopTime,lastData,oneTimeData:onTimeData,printerNum:printNum,currentPrint}=that;\r\n\t\t\t\tlet buf;\r\n\t\t\t\tlet dataView;\r\n\t\t\t\tif (currentTime < loopTime) {\r\n\t\t\t\t\tbuf = new ArrayBuffer(onTimeData)\r\n\t\t\t\t\tdataView = new DataView(buf)\r\n\t\t\t\t\tfor (var i = 0; i < onTimeData; ++i) {\r\n\t\t\t\t\t\tdataView.setUint8(i, buff[(currentTime - 1) * onTimeData + i])\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbuf = new ArrayBuffer(lastData)\r\n\t\t\t\t\tdataView = new DataView(buf)\r\n\t\t\t\t\tfor (var i = 0; i < lastData; ++i) {\r\n\t\t\t\t\t\tdataView.setUint8(i, buff[(currentTime - 1) * onTimeData + i])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"第\" + currentTime + \"次发送数据大小为：\" + buf.byteLength)\r\n\t\t\t\t\r\n\t\t\t\tuni.writeBLECharacteristicValue({\r\n\t\t\t\t\tdeviceId: that.BLEInformation.deviceId,\r\n\t\t\t\t\tserviceId: that.BLEInformation.writeServiceId,\r\n\t\t\t\t\tcharacteristicId: that.BLEInformation.writeCharaterId,\r\n\t\t\t\t\tvalue: buf,\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(e) {\r\n\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t\tcurrentTime++\r\n\t\t\t\t\t\tif (currentTime <= loopTime) {\r\n\t\t\t\t\t\t\tthat.currentTime = currentTime;\r\n\t\t\t\t\t\t\tthat.Send(buff)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log('打印完成')\r\n\t\t\t\t\t\t\tif (currentPrint == printNum) {\r\n\t\t\t\t\t\t\t\tthat.looptime = 0;\r\n\t\t\t\t\t\t\t\tthat.lastData = 0;\r\n\t\t\t\t\t\t\t\tthat.currentTime = 1;\r\n\t\t\t\t\t\t\t\tthat.isReceiptSend = false;\r\n\t\t\t\t\t\t\t\tthat.isLabelSend = false;\r\n\t\t\t\t\t\t\t\tthat.currentPrint = 1;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcurrentPrint++;\r\n\t\t\t\t\t\t\t\tthat.currentPrint = currentPrint;\r\n\t\t\t\t\t\t\t\tthat.currentTime = 1;\r\n\t\t\t\t\t\t\t\tthat.Send(buff)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthat.$emit('printComplete')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\t.input{  \r\n\t\ttext-align: top; \r\n\t\t width: 90%;  \r\n\t\t height: 150px;  \r\n\t\t margin-left: 4%; \r\n\t\t margin-right: 4%;  \r\n\t\t margin-top: 10px; \r\n\t\t margin-bottom: 12px; \r\n\t\tborder: 1px solid slategray;\r\n\t}\r\n\t.receiver_info_scroll_view{ \r\n\t\twidth: 90%; \r\n\t\theight: 200px; \r\n\t\tmargin-left: 4%;\r\n\t\tmargin-right: 4%; \r\n\t\tmargin-top: 10px;\r\n\t\tmargin-bottom: 25px;\r\n\t\tborder: 1px solid black;\r\n\t}\r\n\t.result{ \r\n\t\twidth: 90%;  \r\n\t\theight: 150px; \r\n\t\tborder: 1px solid black; \r\n\t\tmargin-left: 4%;\r\n\t\tmargin-bottom: 4%; \r\n\t\tmargin-top: 5%;\r\n\t}\r\n    button{ \r\n\t  width: 90%; \r\n\t  margin-left: 5%; \r\n\t  margin-right: 5%;\r\n\t}\r\n\t.switch{ \r\n\t\tfloat: right; \r\n\t\tmargin-right: 20px; \r\n\t\tmargin-bottom: 16px;\r\n\t}\r\n    text{ \r\n\t   color: #fff; \r\n\t   display: block;\r\n\t}\r\n\tinput{  \r\n\t\tcolor: gainsboro;  \r\n\t\tfloat: left;\r\n\t}\r\n\t.v_net_ssid{  \r\n\t\twidth: 100%; \r\n\t\tbackground:  #fff;\r\n\t}\r\n\t.v_net_passw{ \r\n\t\twidth: 100%; \r\n\t\tbackground: antiquewhite;\r\n\t}\r\n    .swiper{ \r\n\t   width: 100%; \r\n\t   height: 100%;\r\n\t}\r\n\r\n</style>\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sendCommand.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sendCommand.vue?vue&type=style&index=0&lang=less&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1591587082904\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}